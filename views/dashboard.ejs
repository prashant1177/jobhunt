<% layout('./layout/boilerplate.ejs') -%>
<body>
  <div class="container my-4">
    <h1>Your Posted Jobs</h1>
    <% if (jobApplications.length > 0) { %> <% jobApplications.forEach(({ job,
    applications }) => { %>
    <div class="card my-3">
      <div class="card-header d-flex justify-content-between">
        <a
          href="/job/<%= job._id %>"
          style="color: black; text-decoration: none"
        >
          <h3><%= job.title %></h3>
        </a>
        <div class="d-flex">
          <a href="/candidates/<%= job._id %>">
            <button type="submit" class="btn btn-primary">
              Eligible Candidates
            </button>
          </a>
          <a
            href="/job/<%= job._id %>/applications"
            style="color: black; text-decoration: none"
          >
            <button
              type="submit"
              class="me-2 bg-dark text-white p-2 rounded border-0"
            >
              View Applications
            </button>
          </a>
          <form
            action="/jobs/<%= job._id %>/delete"
            method="POST"
            style="display: inline"
          >
            <button
              type="submit"
              class="btn btn-danger"
              onclick="return confirm('Are you sure you want to delete this job?');"
            >
              Delete Job
            </button>
          </form>
        </div>
      </div>
      <div class="card-body">
        <p><strong>Company:</strong> <%= job.company %></p>
        <p><strong>Location:</strong> <%= job.location %></p>
        <p><strong>Applicants:</strong> <%= applications.length %></p>
      </div>
    </div>
    <% }); %> <% } else { %>
    <p>You haven't posted any jobs yet.</p>
    <% } %>
  </div>
</body>
